<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Generator - Coqui TTS</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>

<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-microphone"></i> Audio Generator</h1>
            <p>Convert text to speech using Coqui TTS</p>
        </header>

        <main>
            <div class="form-container">
                <form id="tts-form">
                    <div class="form-group">
                        <label for="text">Text to Convert:</label>
                        <textarea id="text" name="text" rows="4"
                            placeholder="Enter the text you want to convert to speech..." required></textarea>
                        <div class="char-counter">
                            <span id="char-count">0</span> characters
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="model">TTS Model:</label>
                            <select id="model" name="model">
                                <option value="tts_models/multilingual/bark">üê∂ Bark (MIT License - Emotional Tags)
                                </option>
                                <option value="tts_models/multilingual/openvoice">üé§ OpenVoice (MIT License - Voice
                                    Cloning)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="language">Language:</label>
                            <select id="language" name="language">
                                <option value="en">English</option>
                                <option value="es">Spanish</option>
                                <option value="fr">French</option>
                                <option value="de">German</option>
                                <option value="it">Italian</option>
                                <option value="pt">Portuguese</option>
                                <option value="pl">Polish</option>
                                <option value="tr">Turkish</option>
                                <option value="ru">Russian</option>
                                <option value="nl">Dutch</option>
                                <option value="cs">Czech</option>
                                <option value="ar">Arabic</option>
                                <option value="zh">Chinese</option>
                                <option value="ja">Japanese</option>
                            </select>
                        </div>
                    </div>

                    <div id="voice-cloning-section" class="form-group" style="display: none;">
                        <label for="speaker-audio">
                            <i class="fas fa-microphone-alt"></i> Speaker Audio (for Voice Cloning):
                        </label>
                        <input type="file" id="speaker-audio" name="speaker_audio" accept="audio/*">
                        <small class="help-text">
                            Upload a 6-30 second audio sample of the voice you want to clone.
                            Supported formats: WAV, MP3, M4A, FLAC
                        </small>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="speaker">Speaker (optional):</label>
                            <select id="speaker" name="speaker">
                                <option value="">Default Speaker</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="speed">Speed:</label>
                            <input type="range" id="speed" name="speed" min="0.5" max="2.0" step="0.1" value="1.0">
                            <span id="speed-value">1.0x</span>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" id="generate-btn">
                            <i class="fas fa-play"></i> Generate Audio
                        </button>
                        <button type="button" id="clear-btn">
                            <i class="fas fa-eraser"></i> Clear
                        </button>
                    </div>
                </form>
            </div>

            <div id="loading" class="loading-container" style="display: none;">
                <div class="spinner"></div>
                <p>Generating audio, please wait...</p>
            </div>

            <div id="result" class="result-container" style="display: none;">
                <h3><i class="fas fa-volume-up"></i> Generated Audio</h3>
                <div class="audio-player">
                    <audio id="audio-player" controls>
                        Your browser does not support the audio element.
                    </audio>
                </div>
                <div class="result-actions">
                    <a id="download-link" class="btn btn-download" href="#" download>
                        <i class="fas fa-download"></i> Download
                    </a>
                    <button id="generate-another" class="btn btn-secondary">
                        <i class="fas fa-plus"></i> Generate Another
                    </button>
                </div>
                <div class="result-info">
                    <p><strong>Text:</strong> <span id="result-text"></span></p>
                    <p><strong>Model:</strong> <span id="result-model"></span></p>
                    <p><strong>File:</strong> <span id="result-filename"></span></p>
                </div>
            </div>

            <div id="error" class="error-container" style="display: none;">
                <h3><i class="fas fa-exclamation-triangle"></i> Error</h3>
                <p id="error-message"></p>
                <button id="retry-btn" class="btn btn-secondary">
                    <i class="fas fa-redo"></i> Try Again
                </button>
            </div>
        </main>

        <footer>
            <p>&copy; 2024 Audio Generator - Powered by Coqui TTS</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>